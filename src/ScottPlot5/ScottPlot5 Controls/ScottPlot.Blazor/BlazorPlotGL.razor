@using SkiaSharp.Views.Blazor;
@using SkiaSharp;
@inherits BlazorPlot

<div>
    <SKGLView @ref="SKGLView" OnPaintSurface="OnPaintSurface" IgnorePixelScaling="true"
    @onpointerdown="OnPointerPressed"
    @onpointermove="OnPointerMoved"
    @onpointerup="OnPointerReleased"
    @ondblclick="OnDoubleTapped"
    @onwheel="OnPointerWheelChanged"
    @onkeydown="OnKeyDown"
    @onkeyup="OnKeyUp"
              style=@Style />
</div>
@code {

    private SKGLView SKGLView { get; set; } = new();


    public void OnPaintSurface(SKPaintGLSurfaceEventArgs e)
    {
        Plot.Render(e.Surface.Canvas, (int)e.Surface.Canvas.LocalClipBounds.Width, (int)e.Surface.Canvas.LocalClipBounds.Height);
    }


    public override void Refresh()
    {
        SKGLView.Invalidate();
        RenderQueue.RefreshAll();
    }

}